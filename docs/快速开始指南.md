# 快速开始指南

本指南帮助你在 10 分钟内创建并构建你的第一个 WebView 应用。

---

## 前置要求

### 必需

- Git
- Python 3.x

### 可选（根据目标平台）

**Android 开发：**
- JDK 17
- Android SDK

**iOS 开发：**
- macOS
- Xcode 14+

---

## 步骤 1：克隆项目

```bash
git clone <your-repo-url>
cd <your-repo-name>
```

---

## 步骤 2：修改配置

### 2.1 编辑应用选择文件

打开 `assets/build.app`：

```properties
appName=app1
```

保持为 `app1`（默认应用）或创建新的应用配置。

### 2.2 编辑应用配置

打开 `assets/app1/app.cfg`，修改以下关键配置：

```properties
# 修改应用名称
appDisplayName=我的应用

# 修改应用 ID（重要！）
appId=com.yourcompany.yourapp

# 修改要加载的网页
loadUrl=https://www.example.com

# 保持 Debug 模式（首次构建）
isDebug=true
```

**重要提示：**
- `appId` 必须是唯一的，使用反向域名格式
- `loadUrl` 必须是完整的 URL（包括 http:// 或 https://）

---

## 步骤 3：准备资源（可选）

将你的应用图标和启动图放入 `assets/app1/` 目录：

- `icon.png`：应用图标（建议 1024x1024）
- `loading.png`：启动页图片（建议 512x512）

如果没有准备资源，可以暂时跳过此步骤。

---

## 步骤 4：运行配置脚本

```bash
python3 scripts/build_config.py
```

你应该看到类似以下输出：

```
==================================================
WebView App Configuration Builder
==================================================

App Name: app1
Config loaded from: assets/app1/app.cfg
Total config items: 59

=== Copying Resources ===
...

=== Configuring Android ===
...

=== Configuring iOS ===
...

==================================================
Configuration completed successfully!
==================================================
```

---

## 步骤 5：构建应用

### 选项 A：构建 Android 应用（推荐新手）

```bash
cd android
./gradlew assembleDebug
```

**构建时间：** 首次构建约 2-5 分钟

**输出位置：** `android/app/build/outputs/apk/debug/app-debug.apk`

**安装到设备：**

```bash
# 通过 USB 连接设备，启用 USB 调试
adb install app/build/outputs/apk/debug/app-debug.apk
```

### 选项 B：构建 iOS 应用（需要 Mac）

```bash
cd ios
open WebViewApp.xcodeproj
```

在 Xcode 中：
1. 选择目标设备（模拟器或真机）
2. 点击运行按钮 ▶️
3. 应用将自动构建并运行

---

## 步骤 6：测试应用

1. **启动应用**
   - 你应该看到启动页，显示加载图片和文字
   - 1 秒后自动跳转到主页

2. **检查 WebView**
   - 主页应该加载你配置的 URL
   - 顶部显示加载进度条（如果启用）
   - 可以正常浏览网页

3. **测试功能**
   - 点击链接
   - 使用返回按钮
   - 测试 JavaScript（如果网页需要）

---

## 下一步

### 创建第二个应用

1. **复制配置目录：**

```bash
cp -r assets/app1 assets/app2
```

2. **修改配置：**

编辑 `assets/app2/app.cfg`：

```properties
appDisplayName=另一个应用
appId=com.yourcompany.anotherapp
loadUrl=https://another-site.com
```

3. **切换构建目标：**

编辑 `assets/build.app`：

```properties
appName=app2
```

4. **重新构建：**

```bash
python3 scripts/build_config.py
cd android && ./gradlew assembleDebug
```

### 准备发布到应用商店

参考详细文档：
- [Android 打包说明](Android打包说明.md)
- [iOS 打包说明](iOS打包说明.md)

主要步骤：
1. 修改配置：`isDebug=false`
2. 配置签名证书
3. 构建 Release 版本
4. 上传到应用商店

### 使用 GitHub Actions 自动打包

1. **配置 GitHub Secrets**（参考文档）
2. **提交代码：**

```bash
git add .
git commit -m "Initial commit"
git push
```

3. **创建 Release 标签：**

```bash
git tag v1.0.0
git push origin v1.0.0
```

4. **等待构建完成**
   - 访问 GitHub 仓库的 Actions 标签
   - 查看构建进度
   - 构建完成后，在 Releases 页面下载 APK/IPA

---

## 常见问题

### Q1: Python 脚本运行失败

**错误：** `python3: command not found`

**解决：**

```bash
# macOS
brew install python3

# Ubuntu/Debian
sudo apt-get install python3

# Windows - 从 python.org 下载安装
```

### Q2: Android 构建失败

**错误：** `JAVA_HOME is not set`

**解决：**

```bash
# 安装 JDK 17
# macOS
brew install openjdk@17
export JAVA_HOME=$(/usr/libexec/java_home -v 17)

# Ubuntu/Debian
sudo apt-get install openjdk-17-jdk
export JAVA_HOME=/usr/lib/jvm/java-17-openjdk-amd64
```

### Q3: 无法安装到设备

**错误：** Android 设备拒绝安装

**解决：**
1. 在设备上启用"开发者选项"
2. 启用"USB 调试"
3. 允许"未知来源"安装

### Q4: iOS 构建失败

**错误：** Signing error

**解决：**
1. 在 Xcode 中登录 Apple ID
2. 选择 Target > Signing & Capabilities
3. 选择你的 Team
4. 选择 Development 证书

### Q5: 网页显示空白

**原因：** URL 错误或网络问题

**检查：**
1. 确认 `loadUrl` 是完整的 URL
2. 确认设备有网络连接
3. 如果是 HTTP，检查 `enableHttps` 配置
4. 查看调试日志

---

## 调试技巧

### Android 调试

**查看日志：**

```bash
adb logcat | grep WebView
```

**使用 Chrome DevTools：**
1. 在 Chrome 中打开 `chrome://inspect`
2. 连接设备
3. 选择你的应用 WebView
4. 开始调试

### iOS 调试

**使用 Safari Web Inspector：**
1. 在设备上启用 Safari 的 Web Inspector
2. 在 Mac 上打开 Safari
3. 菜单栏 > Develop > [设备名] > [应用名]
4. 开始调试

**查看 Xcode 日志：**
1. 在 Xcode 中打开 Window > Devices and Simulators
2. 选择设备
3. 查看 Console

---

## 获取帮助

- 查看[完整文档](../README.md)
- 阅读[配置文件说明](配置文件说明.md)
- 提交 [GitHub Issue](../../issues)

---

**祝你使用愉快！** 🎉
